{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport CategoryFilterBuilder from '../filters/category';\nimport CheckFilterBuilder from '../filters/check';\nimport ColorFilterBuilder from '../filters/color';\nimport productsData from '../database/products';\nimport RadioFilterBuilder from '../filters/radio';\nimport RangeFilterBuilder from '../filters/range';\nimport { delayResponse } from '../utils';\n\nfunction getProducts(shift, options) {\n  var limit = options.limit || 8;\n  var products = [].concat(_toConsumableArray(productsData.slice(shift)), _toConsumableArray(productsData.slice(0, shift)));\n\n  if (options.category === 'power-tools') {\n    products = products.slice().reverse();\n  } else if (options.category === 'hand-tools') {\n    products = [].concat(_toConsumableArray(products.slice(8)), _toConsumableArray(products.slice(0, 8)));\n  } else if (options.category === 'plumbing') {\n    products = [].concat(_toConsumableArray(products.slice(8)), _toConsumableArray(products.slice(0, 8))).reverse();\n  }\n\n  return delayResponse(350, products.slice(0, limit));\n}\n\nexport function getProductBySlug(slug) {\n  var product = productsData.find(function (x) {\n    return x.slug === slug;\n  });\n  return product ? Promise.resolve(product) : Promise.reject();\n}\nexport function getRelatedProducts(slug) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var limit = options.limit || 8;\n  return Promise.resolve(productsData.slice(0, limit));\n}\nexport function getProductsList() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var filterValues = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var filters = [new CategoryFilterBuilder('category', 'Categories'), new RangeFilterBuilder('price', 'Price'), new CheckFilterBuilder('brand', 'Brand'), new RadioFilterBuilder('discount', 'Discount'), new ColorFilterBuilder('color', 'Color')];\n  var items = productsData.slice(0);\n  filters.forEach(function (filter) {\n    return filter.makeItems(items, filterValues[filter.slug]);\n  }); // Calculate items count for filter values.\n\n  filters.forEach(function (filter) {\n    return filter.calc(filters);\n  }); // Apply filters to products list.\n\n  items = items.filter(function (product) {\n    return filters.reduce(function (mr, filter) {\n      return mr && filter.test(product);\n    }, true);\n  });\n  var page = options.page || 1;\n  var limit = options.limit || 12;\n  var sort = options.sort || 'default';\n  var total = items.length;\n  var pages = Math.ceil(total / limit);\n  var from = (page - 1) * limit + 1;\n  var to = Math.max(Math.min(page * limit, total), from);\n  items = items.sort(function (a, b) {\n    if (['name_asc', 'name_desc'].includes(sort)) {\n      if (a.name === b.name) {\n        return 0;\n      }\n\n      return (a.name > b.name ? 1 : -1) * (sort === 'name_asc' ? 1 : -1);\n    }\n\n    return 0;\n  });\n  var start = (page - 1) * limit;\n  var end = start + limit;\n  items = items.slice(start, end);\n  return delayResponse(350, {\n    page: page,\n    limit: limit,\n    sort: sort,\n    total: total,\n    pages: pages,\n    from: from,\n    to: to,\n    items: items,\n    filters: filters.map(function (x) {\n      return x.build();\n    })\n  });\n}\nexport function getFeaturedProducts() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return getProducts(0, options);\n}\nexport function getLatestProducts() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return getProducts(0, options);\n}\nexport function getTopRatedProducts() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return getProducts(0, options);\n}\nexport function getDiscountedProducts() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return getProducts(3, options);\n}\nexport function getPopularProducts() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return getProducts(6, options);\n}\nexport function getSuggestions(query, options) {\n  var limit = options.limit || 5;\n  return Promise.resolve(productsData.filter(function (x) {\n    return x.name.toLowerCase().includes(query.toLowerCase());\n  }).slice(0, limit));\n}\nexport function getCategoryLists(query, options) {\n  var limit = options.limit || 5;\n  return Promise.resolve(productsData.filter(function (x) {\n    return x.name.toLowerCase().includes(query.toLowerCase());\n  }).slice(0, limit));\n}","map":{"version":3,"sources":["D:/xampp/htdocs/neo.co.th/nextapp/src/fake-server/endpoints/products.ts"],"names":["CategoryFilterBuilder","CheckFilterBuilder","ColorFilterBuilder","productsData","RadioFilterBuilder","RangeFilterBuilder","delayResponse","getProducts","shift","options","limit","products","slice","category","reverse","getProductBySlug","slug","product","find","x","Promise","resolve","reject","getRelatedProducts","getProductsList","filterValues","filters","items","forEach","filter","makeItems","calc","reduce","mr","test","page","sort","total","length","pages","Math","ceil","from","to","max","min","a","b","includes","name","start","end","map","build","getFeaturedProducts","getLatestProducts","getTopRatedProducts","getDiscountedProducts","getPopularProducts","getSuggestions","query","toLowerCase","getCategoryLists"],"mappings":"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","sourcesContent":["import CategoryFilterBuilder from '../filters/category';\nimport CheckFilterBuilder from '../filters/check';\nimport ColorFilterBuilder from '../filters/color';\nimport productsData from '../database/products';\nimport RadioFilterBuilder from '../filters/radio';\nimport RangeFilterBuilder from '../filters/range';\nimport { IProduct, IProductsList } from '../../interfaces/product';\nimport { delayResponse } from '../utils';\n\nexport interface GetProductsOptions {\n    limit?: number;\n    category?: string;\n}\n\nexport interface GetProductsListOptions {\n    page?: number;\n    limit?: number;\n    sort?: string;\n}\n\nexport interface GetProductsListFilters {\n    [filterSlug: string]: string;\n}\n\nexport type GetSuggestionsOptions = {\n    limit?: number;\n    category?: string;\n};\nexport type GetCategoryLists = {\n    limit?: number;\n    category?: string;\n};\n\nfunction getProducts(shift: number, options: GetProductsOptions): Promise<IProduct[]> {\n    const limit = options.limit || 8;\n    let products = [...productsData.slice(shift), ...productsData.slice(0, shift)];\n\n    if (options.category === 'power-tools') {\n        products = products.slice().reverse();\n    } else if (options.category === 'hand-tools') {\n        products = [...products.slice(8), ...products.slice(0, 8)];\n    } else if (options.category === 'plumbing') {\n        products = [...products.slice(8), ...products.slice(0, 8)].reverse();\n    }\n\n    return delayResponse(350, products.slice(0, limit));\n}\n\nexport function getProductBySlug(slug: string) {\n    const product = productsData.find((x) => x.slug === slug);\n\n    return product ? Promise.resolve(product) : Promise.reject();\n}\n\nexport function getRelatedProducts(slug: string, options: GetProductsOptions = {}) {\n    const limit = options.limit || 8;\n\n    return Promise.resolve(productsData.slice(0, limit));\n}\n\nexport function getProductsList(\n    options: GetProductsListOptions = {},\n    filterValues: GetProductsListFilters = {},\n): Promise<IProductsList> {\n    const filters = [\n        new CategoryFilterBuilder('category', 'Categories'),\n        new RangeFilterBuilder('price', 'Price'),\n        new CheckFilterBuilder('brand', 'Brand'),\n        new RadioFilterBuilder('discount', 'Discount'),\n        new ColorFilterBuilder('color', 'Color'),\n    ];\n\n    let items = productsData.slice(0);\n\n    filters.forEach((filter) => filter.makeItems(items, filterValues[filter.slug]));\n\n    // Calculate items count for filter values.\n    filters.forEach((filter) => filter.calc(filters));\n\n    // Apply filters to products list.\n    items = items.filter(\n        (product) => filters.reduce<boolean>((mr, filter) => mr && filter.test(product), true),\n    );\n\n    const page = options.page || 1;\n    const limit = options.limit || 12;\n    const sort = options.sort || 'default';\n    const total = items.length;\n    const pages = Math.ceil(total / limit);\n    const from = (page - 1) * limit + 1;\n    const to = Math.max(Math.min(page * limit, total), from);\n\n    items = items.sort((a, b) => {\n        if (['name_asc', 'name_desc'].includes(sort)) {\n            if (a.name === b.name) {\n                return 0;\n            }\n\n            return (a.name > b.name ? 1 : -1) * (sort === 'name_asc' ? 1 : -1);\n        }\n\n        return 0;\n    });\n\n    const start = (page - 1) * limit;\n    const end = start + limit;\n\n    items = items.slice(start, end);\n\n    return delayResponse(350, {\n        page,\n        limit,\n        sort,\n        total,\n        pages,\n        from,\n        to,\n        items,\n        filters: filters.map((x) => x.build()),\n    });\n}\n\nexport function getFeaturedProducts(options = {}) {\n    return getProducts(0, options);\n}\n\nexport function getLatestProducts(options = {}) {\n    return getProducts(0, options);\n}\n\nexport function getTopRatedProducts(options = {}) {\n    return getProducts(0, options);\n}\n\nexport function getDiscountedProducts(options = {}) {\n    return getProducts(3, options);\n}\n\nexport function getPopularProducts(options = {}) {\n    return getProducts(6, options);\n}\n\nexport function getSuggestions(query: string, options: GetSuggestionsOptions) {\n    const limit = options.limit || 5;\n\n    return Promise.resolve(\n        productsData.filter(\n            (x) => x.name.toLowerCase().includes(query.toLowerCase()),\n        ).slice(0, limit),\n    );\n}\n\nexport function getCategoryLists(query: string, options: GetCategoryLists) {\n    const limit = options.limit || 5;\n\n    return Promise.resolve(\n        productsData.filter(\n            (x) => x.name.toLowerCase().includes(query.toLowerCase()),\n        ).slice(0, limit),\n    );\n}\n"]},"metadata":{},"sourceType":"module"}